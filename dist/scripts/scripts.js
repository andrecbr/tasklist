"use strict";angular.module("tasklistApp",["ngAnimate","ngResource","ngSanitize","ngTouch","ui.router","toastr"]).config(["$stateProvider","$urlRouterProvider",function(t,e){t.state("app",{url:"/app","abstract":!0,templateUrl:"views/layout.html",controller:"RootCtrl"}).state("app.home",{url:"^/home",views:{content:{templateUrl:"views/home.html",controller:"HomeCtrl as vm"}}}).state("app.profile",{url:"^/profile",views:{content:{templateUrl:"views/profile.html"}}}),e.otherwise("/home")}]),angular.module("tasklistApp").controller("RootCtrl",function(){}),angular.module("tasklistApp").controller("HomeCtrl",["Tarefa","$window","toastr",function(t,e,a){var o=this,s={titulo:"",descricao:"",status:0};o.loadTasks=function(){o.tasks=[],t.query().$promise.then(function(t){o.tasks=t})},o.newTask=function(){o.task=angular.copy(s)},o.saveTask=function(){var e="insert",s=null;o.task.id&&(e="update",s={id:o.task.id}),t.save(s,o.task).$promise.then(function(s){s.id&&t.get({id:s.id}).$promise.then(function(t){"insert"===e?(a.success("Tarefa cadastrada","Sucesso."),o.tasks.push(t)):(a.success("Tarefa alterada","Sucesso."),o.loadTasks())})})["finally"](function(){o.newTask()})},o.editTask=function(t){o.task=t},o.deleteTask=function(s){e.confirm("Confirma a exclusão da tarefa?")&&t["delete"]({id:s}).$promise.then(function(t){t.count&&(a.success("Tarefa excluída","Sucesso."),o.loadTasks(),o.newTask())})},o.formatDate=function(t){return new Date(t).toISOString()},o.loadTasks(),o.newTask()}]),angular.module("tasklistApp").directive("btnNewTask",["$timeout",function(t){return{restrict:"C",link:function(e,a,o){a.bind("click",function(){t(function(){$("form input:nth-child(1n):visible")[0].focus()})})}}}]),angular.module("tasklistApp").factory("Tarefa",["$resource",function(t){return t("http://demo.performatric.com.br/api/tarefa/:id",null,{update:{method:"PUT"}})}]);